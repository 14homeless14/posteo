<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Formulario de Atención de Falla</title>
    <link rel="stylesheet" href="/static/estilos.css" />
    <script src="/static/login.js"></script>
    <script src="/static/botones.js"></script>
  </head>

  <body>
    <h1>Bienvenido a la página de posteo</h1>
    
    <!-- Formulario de relleno manual -->
    <form id="datosDePosteo" action="/posteo" method="POST">
      <legend>relleno manual</legend>

      <label for="tuNombre">Tu Nombre:</label>
      <select id="tuNombre" name="tuNombre" required>
        <option value="Emmanuel Lopez">Emmanuel Lopez</option>
        <option value="Irving Navarro">Irving Navarro</option>
      </select>

      <label for="tipoFalla">Tipo de Falla:</label>
      <select id="tipoFalla" name="tipoFalla" required>
        <option value="TOTAL">TOTAL</option>
        <option value="PARCIAL">PARCIAL</option>
        <option value="MCA">MCA</option>
        <option value="Enlace">Enlace</option>
        <option value="MCA REQ Serv">MCA REQ Serv</option>
        <option value="SNR">SNR</option>
        <option value="MASIVA">MASIVA</option>
      </select>
      <br />
      <label for="folioOT">#Folio OT:</label>
      <input type="text" id="folioOT" name="folioOT"  />

      <label for="clientesAfectados">Clientes Afectados:</label>
      <input type="text" id="clientesAfectados" name="clientesAfectados"  />

      <label for="coordenadas">Coordenadas:</label>
      <input type="text" id="coordenadas" name="coordenadas"  />

      <label for="ctcHub">CTC o Hub:</label>
      <input type="text" id="ctcHub" name="ctcHub" placeholder="opcional" />

      <label for="alarma">Alarma:</label>
      <input type="text" id="alarma" name="alarma" placeholder="opcional" />
      <button type="submit">Enviar</button>
    </form>

    <form id="fallasForm">
      <fieldset>
        <legend>relleno automatico</legend>
        <label for="tiempoDeTT">Tiempo Trascurrio desde generacion de TT</label>
        <input type="text" id="tiempoDeTT" name="tiempoDeTT" placeholder="se rellena solo"required/>

        <label for="numSucursal">Número de Sucursal:</label>
        <input type="text" id="numSucursal" name="numSucursal" placeholder="se rellena solo" required/>

        <label for="sucursal">Sucursal:</label>
        <input type="text" id="sucursal" name="sucursal" placeholder="se rellena solo" required/>

        <label for="tituloFalla">Título de la Falla:</label>
        <input type="text" id="tituloFalla" name="tituloFalla" placeholder="se rellena solo" required/>

        <!--placeholder="HH:MM:SS"-->

        <label for="numeroTT">#Ticket Cherwell:</label>
        <input type="text" id="numeroTT" name="numeroTT" placeholder="se rellena solo" required/>

        <label for="nodo">#Nodo o Puerto:</label>
        <input type="text" id="nodo" name="nodo" placeholder="se rellena solo" required/>

        <label for="fechaDetectadaOTEnSGA">Fecha de generacion y hora de generacion de OT:</label>
        <input type="text" id="fechaDetectadaOTEnSGA" name="fechaDetectadaOTEnSGA" placeholder="YYYY-MM-DD HH:mm:ss" required />

        <label for="fechaAlarm">Fecha de Creación y hora de creacion TT:</label>
        <input type="text" id="fechaAlarm" name="fechaAlarm" placeholder="se rellena solo" required/>
        
        <label for="sga">Datos SGA:</label>
        <textarea id="sga" name="sga" rows="2"></textarea>
        <br />
        <textarea id="descripcion" name="descripcion" rows="2" style="display: none;"></textarea>      </fieldset>

      <fieldset>
        <label for="datosAdicionales">Datos Adicionales:</label>
        <textarea id="datosAdicionales" name="datosAdicionales" rows="4"></textarea>
      </fieldset>

      <fieldset>
        <label for="status">Status:</label>
        <select id="status" name="status">
          <option value="1">De su apoyo para la atención</option>
          <option value="2">
            Cliente confirma que cuenta con energía eléctrica
          </option>
          <option value="3">Se confirma ausencia de CFE</option>
          <option value="4">
            Cliente no contesta de su apoyo para la atención
          </option>
          <option value="5">
            Zona conflictiva de su apoyo para la atención a primera hora de la
            mañana
          </option>
          <option value="6">
            Sin personal nocturno de su apoyo para la atención a primera hora de
            la mañana
          </option>
          <option value="7">Mal clima en la zona</option>
          <option value="8">Clientes no se encuentran en domicilio</option>
        </select>
      </fieldset>

      <button type="submit">Enviar</button>

      <!-- Botón para abrir el diálogo -->
      <button type="button" id="abrirDialogo">Abrir Diálogo</button>

      <!-- El diálogo que se abrirá -->
      <dialog id="miDialogo" closedby="any">
        <p>Este es el contenido de tu diálogo.</p>
        <!-- Botón para cerrar el diálogo -->
        <button type="button" id="cerrarDialogo">Cerrar</button>
      </dialog>
    </form>

    <!-- Botón para cerrar sesión -->
    <button onclick="logout()">Cerrar sesión</button>

    <script>
       // Flask convierte el diccionario Python en un objeto JS
       const rellena = { dato | tojson | safe };
      // Rellenamos los campos con los valores del JSON
      for (const campo in rellena) {
      const input = document.getElementById(campo);
       if (input) input.value = rellena[campo];
      }
    </script>
  </body>
</html>
